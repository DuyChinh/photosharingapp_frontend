import{_ as A,i as X,c as v,h as b,b as t,j as I,d as L,t as y,e as $,v as B,F as E,k as T,m as q,r as i,p as w,q as Z,s as R,l as _,a as F,x as V,y as G,f as H,R as Q,z as Y,n as ee}from"./index-D8N1V1Ye.js";import{H as te}from"./index-BGNzt9ry.js";import{A as K,a as x}from"./axios-DrBnLb82.js";import{h as z}from"./moment-C5S46NFB.js";import{L as ae}from"./index-CuiBCayN.js";import{_ as oe}from"./library-DrGpF6_9.js";import"./index-DW_MHI2K.js";const se={__name:"commentItem",props:{comment:{type:Object,required:!0}},emits:["reply","like","delete"],setup(g,{expose:a,emit:l}){a();const e=g,c=l,r=i(!1),o=i(""),n=i(!1),j={props:e,emit:c,showReplyForm:r,replyText:o,showReplies:n,toggleReplyForm:()=>{r.value=!r.value},submitReply:()=>{o.value.trim()&&(c("reply",{commentId:e.comment._id,replyText:o.value.trim()}),o.value="",r.value=!1)},likeComment:()=>{c("like",e.comment._id)},deleteComment:()=>{c("delete",e.comment._id)},toggleShowReplies:()=>{n.value=!n.value},convertTime:S=>z(S).fromNow(),convertWord:S=>{if((S==null?void 0:S.length)>0){const D=S.split(" ");return D.length>0?D[D.length-1][0]:""}return""},ref:i,Avatar:K,get moment(){return z}};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}},ne={class:"comment"},le={class:"list_comment_item d-flex gap-2 mt-2"},ie={class:"w-100"},re={class:"d-flex justify-content-between align-items-center"},de={class:"fw-bold"},ce={class:"text-success"},me={class:"d-flex align-items-center gap-3"},ue={key:0,class:"d-flex align-items-center gap-2 mt-2"},he={key:1,class:"reply_list mt-2 ms-4"},pe={key:0};function be(g,a,l,e,c,r){var n,h;const o=X("CommentItem",!0);return b(),v("div",ne,[t("div",le,[t("div",null,[I(e.Avatar,{word:e.convertWord(l.comment.fullname),style:{width:"35px",height:"35px","line-height":"35px",color:"#fff"}},null,8,["word"])]),t("div",ie,[t("div",re,[t("p",de,y(l.comment.fullname),1),t("p",ce,y(e.convertTime(l.comment.time)),1)]),t("p",null,y(l.comment.description),1),t("div",me,[t("button",{class:"btn btn-link text-primary p-0",onClick:e.toggleReplyForm},"Reply"),t("button",{class:"btn btn-link text-danger p-0",onClick:e.likeComment}," ❤️ "+y(((n=l.comment.likes)==null?void 0:n.length)||0),1),t("button",{class:"btn btn-link text-danger p-0",onClick:e.deleteComment},"🗑 Xóa")]),e.showReplyForm?(b(),v("div",ue,[$(t("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>e.replyText=s),class:"form-control",placeholder:"Write reply..."},null,512),[[B,e.replyText]]),t("button",{class:"btn btn-primary",onClick:e.submitReply},a[2]||(a[2]=[t("i",{class:"bi bi-send-fill"},null,-1)]))])):L("v-if",!0),L(" Hiển thị danh sách phản hồi "),(h=l.comment.replies)!=null&&h.length?(b(),v("div",he,[t("button",{class:"btn btn-link p-0",onClick:e.toggleShowReplies},y(e.showReplies?"Collapse":`View more (${l.comment.replies.length})`),1),e.showReplies?(b(),v("div",pe,[(b(!0),v(E,null,T(l.comment.replies,s=>(b(),q(o,{key:s._id,comment:s,onReply:a[1]||(a[1]=d=>g.$emit("reply",d)),onLike:d=>g.$emit("like",s._id),onDelete:d=>g.$emit("delete",s._id)},null,8,["comment","onLike","onDelete"]))),128))])):L("v-if",!0)])):L("v-if",!0)])])])}const ge=A(se,[["render",be],["__scopeId","data-v-660a64a4"],["__file","/Users/doanduychinh/Documents/photosharingapp_frontend/src/components/Comment/commentItem.vue"]]),_e={__name:"index",props:{currentPhoto:{type:Object},user:{type:Object}},setup(g,{expose:a}){a();const l="https://photosharingapp.up.railway.app",e=JSON.parse(localStorage.getItem("userData")),c=i(""),r=i(""),o=i(""),n=i(""),h=i([]),s=i(""),d=g;R(()=>{d!=null&&d.currentPhoto&&(c.value=d.currentPhoto.name||"",r.value=d.currentPhoto.img||"",n.value=d.currentPhoto.description||"",o.value=d.currentPhoto._id||"",m())});const m=async()=>{if(o.value)try{const u=await x.get(`/comments/${o.value}`);h.value=u.data.data||[]}catch(u){console.error("Lỗi khi lấy bình luận:",u),_.error("Lỗi khi tải bình luận!")}},D={baseUrl:l,userData:e,photo_name:c,photo_url:r,photoId:o,desc:n,comments:h,newComment:s,props:d,getComments:m,addComment:async()=>{if(!s.value.trim()){_.warning("Bình luận không được để trống!");return}const u={user_id:e._id,username:e.username,fullname:e.fullname,photo_id:o.value,description:s.value.trim(),time:new Date};try{await x.post("/comments",u),s.value="",m()}catch(P){console.error("Lỗi khi gửi bình luận:",P),_.error("Không thể gửi bình luận!")}},handleReply:async({commentId:u,replyText:P})=>{if(!P.trim()){_.warning("Phản hồi không được để trống!");return}const N={user_id:e._id,username:e.username,fullname:e.fullname,photo_id:o.value,description:P.trim(),time:new Date,parent_id:u};try{await x.post("/comments",N),m()}catch{}},handleLike:async u=>{try{await x.post(`/comments/like/${u}`,{user_id:e._id}),m()}catch{}},handleDeleteComment:async u=>{try{await x.delete(`/comments/${u}`),m()}catch{}},convertWord:u=>{if((u==null?void 0:u.length)>0){const P=u==null?void 0:u.split(" ");if(P.length>0)return P[P.length-1][0]}return""},ref:i,watchEffect:R,Avatar:K,CommentItem:ge,get axios(){return x},get toast(){return _}};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}},fe={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ve={class:"modal-dialog modal-dialog-centered"},ye={class:"modal-content"},xe={class:"modal-header"},Ce={class:"modal-title fs-5 text-success",id:"exampleModalLabel"},ke={class:"modal-body",style:{"overflow-y":"scroll"}},Pe={class:"d-flex align-items-center gap-1"},we={class:"fw-bold fs-3"},Se={class:"mb-2"},De=["src"],Ie={class:"list_comment"},Le={class:"modal-footer"},Re={class:"card_comment d-flex flex-row align-items-center gap-2 py-2 px-3"},Ue={class:"w-100"};function Me(g,a,l,e,c,r){var o,n,h,s,d,m,C;return b(),v("div",null,[t("div",fe,[t("div",ve,[t("div",ye,[t("div",xe,[t("h1",Ce,"Post by "+y((n=(o=e.props)==null?void 0:o.user)==null?void 0:n.fullname),1),a[1]||(a[1]=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),t("div",ke,[t("p",Pe,[I(e.Avatar,{word:e.convertWord((s=(h=e.props)==null?void 0:h.user)==null?void 0:s.fullname),style:{width:"35px",height:"35px","line-height":"35px",color:"#fff"}},null,8,["word"]),w(" "+y((m=(d=e.props)==null?void 0:d.user)==null?void 0:m.fullname),1)]),t("p",we,y(e.photo_name),1),t("p",Se,y(e.desc),1),t("img",{src:`${e.baseUrl}/images/${e.photo_url}`,class:"image w-100 mb-3 rounded-1"},null,8,De),t("div",Ie,[(b(!0),v(E,null,T(e.comments,f=>(b(),q(e.CommentItem,{key:f._id,comment:f,onReply:e.handleReply,onLike:e.handleLike,onDelete:e.handleDeleteComment},null,8,["comment"]))),128))])]),t("div",Le,[t("div",Re,[t("div",null,[I(e.Avatar,{word:e.convertWord((C=e.userData)==null?void 0:C.fullname),style:{width:"35px",height:"35px","line-height":"35px",color:"#fff"}},null,8,["word"])]),t("div",Ue,[$(t("input",{"onUpdate:modelValue":a[0]||(a[0]=f=>e.newComment=f),type:"text",class:"input_comment",placeholder:"Comment here...",onKeyup:Z(e.addComment,["enter"])},null,544),[[B,e.newComment]])]),t("i",{class:"bi bi-send-fill text-primary ms-auto",style:{cursor:"pointer","font-size":"18px"},onClick:e.addComment})])])])])])])}const je=A(_e,[["render",Me],["__scopeId","data-v-7cefe6e9"],["__file","/Users/doanduychinh/Documents/photosharingapp_frontend/src/components/Comment/index.vue"]]),Ae={__name:"DeleteModal",props:{photoId:{type:String},fetchPhotos:{type:Function}},setup(g,{expose:a}){a();const l=g,c={props:l,handleDeletePhoto:async()=>{await x.delete(`/photos/${l.photoId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(r=>{_.success(r.data.message),l.fetchPhotos()}).catch(r=>{var o,n;_.error((n=(o=r.response)==null?void 0:o.data)==null?void 0:n.message)})},ref:i,watch:V,watchEffect:R,get toast(){return _},get axios(){return x}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},Oe={class:"modal fade",id:"deleteModal","aria-hidden":"true","aria-labelledby":"deleteModalLabel",tabindex:"-1"};function $e(g,a,l,e,c,r){return b(),v("div",Oe,[t("div",{class:"modal-dialog modal-dialog-centered"},[t("div",{class:"modal-content"},[a[1]||(a[1]=F('<div class="modal-header"><h1 class="modal-title fs-5 text-danger" id="deleteModalLabel"><i class="fas fa-exclamation-triangle text-danger"></i> Delete Photo </h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> Are you sure you want to delete this photo? </div>',2)),t("div",{class:"modal-footer"},[a[0]||(a[0]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e.handleDeletePhoto},"Confirm")])])])])}const Be=A(Ae,[["render",$e],["__file","/Users/doanduychinh/Documents/photosharingapp_frontend/src/views/Library/DeleteModal.vue"]]),Fe={__name:"EditPhoto",props:{photoId:{type:String},currentPhoto:{type:Object},fetchPhotos:{type:Function}},setup(g,{expose:a}){a();const l=i(""),e=i(""),c=i("public"),r=i(!1),o=localStorage.getItem("token"),n=g,h=()=>{var m,C,f;l.value=(m=n==null?void 0:n.currentPhoto)==null?void 0:m.name,e.value=(C=n==null?void 0:n.currentPhoto)==null?void 0:C.description,c.value=(f=n==null?void 0:n.currentPhoto)==null?void 0:f.share_status};R(h);const d={photoName:l,desc:e,shareStatus:c,loading:r,token:o,props:n,setDefault:h,handleEditPhoto:()=>{const m={name:l==null?void 0:l.value,description:e==null?void 0:e.value,share_status:c==null?void 0:c.value};x.patch(`/photos/${n.photoId}`,m,{headers:{Authorization:`Bearer ${o}`}}).then(C=>{_.success(C.data.message),n.fetchPhotos()}).catch(C=>{var f,M;_.error((M=(f=C.response)==null?void 0:f.data)==null?void 0:M.message)}).finally(()=>{})},ref:i,watch:V,watchEffect:R,get toast(){return _},get axios(){return x}};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},Ve={class:"modal fade",id:"editPhotoModal","aria-hidden":"true","aria-labelledby":"editPhotoLable",tabindex:"-1"},ze={class:"modal-dialog modal-dialog-centered"},Ee={class:"modal-content"},Te={class:"modal-body"},Ne={class:"mb-3"},We={class:"mb-3"},He={class:"mb-3"};function qe(g,a,l,e,c,r){return b(),v("div",Ve,[t("div",ze,[t("div",Ee,[a[8]||(a[8]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5 text-danger",id:"editPhotoLable"},[t("i",{class:"bi bi-pencil-fill"}),w(" Edit Photo ")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Te,[t("form",null,[t("div",Ne,[a[3]||(a[3]=t("label",{for:"photo-name",class:"col-form-label"},"Photo name:",-1)),$(t("input",{type:"text",class:"form-control",id:"photo-name","onUpdate:modelValue":a[0]||(a[0]=o=>e.photoName=o),placeholder:"beautiful scene... "},null,512),[[B,e.photoName]])]),t("div",We,[a[4]||(a[4]=t("label",{for:"photo-des",class:"col-form-label"},"Photo description:",-1)),$(t("textarea",{class:"form-control",id:"photo-des","onUpdate:modelValue":a[1]||(a[1]=o=>e.desc=o),placeholder:"this is beatiful scene..."},null,512),[[B,e.desc]])]),t("div",He,[a[6]||(a[6]=t("label",{for:"share-status",class:"col-form-label"},"Share photo:",-1)),$(t("select",{class:"form-select","aria-label":"Default select example",id:"share-status","onUpdate:modelValue":a[2]||(a[2]=o=>e.shareStatus=o)},a[5]||(a[5]=[t("option",{value:"public"},"public",-1),t("option",{value:"private"},"private",-1)]),512),[[G,e.shareStatus]])])])]),t("div",{class:"modal-footer"},[a[7]||(a[7]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e.handleEditPhoto},"Save changes")])])])])}const Ke=A(Fe,[["render",qe],["__file","/Users/doanduychinh/Documents/photosharingapp_frontend/src/views/Library/EditPhoto.vue"]]),Je={__name:"ChangeShareStatus",props:{photoId:{type:String},shareStatus:{type:String},fetchPhotos:{type:Function}},setup(g,{expose:a}){a();const l=localStorage.getItem("token"),e=g,r={token:l,props:e,handleChangeShareStatus:async()=>{await x.patch(`/photos/share_status/${e.photoId}`,{share_status:e.shareStatus==="private"?"public":"private"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(o=>{_.success(o.data.message),e.fetchPhotos()}).catch(o=>{var n,h;_.error((h=(n=o.response)==null?void 0:n.data)==null?void 0:h.message)})},ref:i,watch:V,watchEffect:R,get toast(){return _},get axios(){return x}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Xe={class:"modal fade",id:"changeShareStatus","aria-hidden":"true","aria-labelledby":"shareStatusLabel",tabindex:"-1"};function Ze(g,a,l,e,c,r){return b(),v("div",Xe,[t("div",{class:"modal-dialog modal-dialog-centered"},[t("div",{class:"modal-content"},[a[1]||(a[1]=F('<div class="modal-header"><h1 class="modal-title fs-5 text-danger" id="shareStatusLabel"><i class="fas fa-exclamation-triangle text-danger"></i> Delete Photo </h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> Are you sure you want to change the share status of this photo? </div>',2)),t("div",{class:"modal-footer"},[a[0]||(a[0]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1)),t("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e.handleChangeShareStatus},"Confirm")])])])])}const Ge=A(Je,[["render",Ze],["__file","/Users/doanduychinh/Documents/photosharingapp_frontend/src/views/Library/ChangeShareStatus.vue"]]),Qe={__name:"index",setup(g,{expose:a}){a();const l="https://photosharingapp.up.railway.app",e=i(!1),c=i(),r=JSON.parse(localStorage.getItem("userData")),o=localStorage.getItem("token"),n=i(!1),h=H(),s=h.query.user_id,d=i(),m=i(0),C=i(0),f=i([]),M=i(),j=i(),S=p=>new Date(p).toLocaleDateString("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric",hour12:!1}),D=async()=>{await x.get(`/users/${s}`,{headers:{Authorization:`Bearer ${o}`}}).then(p=>{d.value=p.data.data,C.value=d.value.follow.length}).catch(p=>{var k,U;_.error((U=(k=p.response)==null?void 0:k.data)==null?void 0:U.message)}).finally(()=>{})};R(D);const u=async()=>{n.value=!0,await x.get(`/photos?userId=${s}`,{headers:{Authorization:`Bearer ${o}`}}).then(p=>{f.value=p.data.data,m.value=f.value.length,s!==r._id&&(f.value=f.value.filter(k=>k.share_status==="public"))}).catch(p=>{var k,U;_.error((U=(k=p.response)==null?void 0:k.data)==null?void 0:U.message)}).then(()=>{n.value=!1})};R(u);const W={baseUrl:l,isLove:e,file:c,userData:r,token:o,loading:n,route:h,user_id:s,user:d,total_image:m,total_follower:C,photos:f,currentPhotoId:M,currentPhoto:j,formatTime:S,getUser:D,fetchPhotos:u,handleUpload:async p=>{const k=p.target.files;if(!k.length)return;const U=new FormData;for(let O of k)U.append("files",O);try{const O=await x.post("/upload",U,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"multipart/form-data"}});_.success("Upload thành công!"),u()}catch(O){_.error("Upload failed. Please try again!"),console.log(O.response.data.message),console.error("Lỗi khi upload:",O)}},handleDelete:async p=>{setImgIdDelete(p),setOpen(!0)},changeCurrentPhoto:p=>{M.value=p._id,j.value=p},handleLove:async p=>{await x.patch(`${l}/photos/love/${p}`,{userId:r._id},{headers:{Authorization:`Bearer ${o}`}}).then(k=>{u()}).catch(k=>{})},isPhotoLoved:p=>p.love&&p.love.includes(r._id),ref:i,watch:V,watchEffect:R,Header:te,Comment:je,DeleteModal:Be,EditPhoto:Ke,Loading:ae,get moment(){return z},ChangeShareStatus:Ge,get useRoute(){return H},get RouterLink(){return Q},get toast(){return _},get axios(){return x}};return Object.defineProperty(W,"__isScriptSetup",{enumerable:!1,value:!0}),W}},Ye={class:"row flex-nowrap gap-3"},et={class:"card col-2 ms-md-4 p-3",style:{background:"#333",color:"#fff"}},tt={class:"card-title fs-5 fw-bold text-success"},at={class:"card-text"},ot={class:"mt-3"},st={class:"badge rounded-pill text-bg-info text-white"},nt={class:"mt-3 d-flex align-items-center gap-1"},lt={class:"badge rounded-pill text-bg-danger"},it={class:"col-9 img_container"},rt={class:"list_image"},dt={key:0,class:"list_image_item p-3 d-flex justify-content-center align-items-center flex-column"},ct={class:"btn btn-danger text-white d-block mx-auto mt-3 upload-btn"},mt={key:1,class:"card list_image_item","aria-hidden":"true"},ut=["src"],ht={class:"p-4"},pt={class:"fw-bold fs-5 title",style:{width:"100%"}},bt={class:"mt-1 desc"},gt={class:"badge rounded-pill text-bg-info text-white mt-2"},_t={class:"d-flex justify-content-between flex-wrap action_image"},ft=["onClick"],vt={key:0,class:"bi bi-heart"},yt={key:1,class:"bi bi-heart-fill text-danger"},xt={class:"badge rounded-pill text-bg-warning",style:{"font-size":"10px"}},Ct=["onClick"],kt={key:0,class:"d-flex justify-content-between flex-wrap gap-2 p-3"},Pt=["onClick"],wt=["onClick"],St=["onClick"];function Dt(g,a,l,e,c,r){var o,n,h;return b(),v("div",null,[I(e.Header,{class:"mb-2"}),t("div",Ye,[t("div",et,[t("div",tt,[a[0]||(a[0]=t("img",{src:oe,class:"icon"},null,-1)),w(" "+y((n=(o=e.user)==null?void 0:o.fullname)==null?void 0:n.split(" ")[e.user.fullname.split(" ").length-1])+"'s library ",1)]),a[5]||(a[5]=F('<div class="text-warning" data-v-820aad51><i class="bi bi-star-fill" data-v-820aad51></i> <i class="bi bi-star-fill" data-v-820aad51></i> <i class="bi bi-star-fill" data-v-820aad51></i> <i class="bi bi-star-fill" data-v-820aad51></i> <i class="bi bi-star-fill" data-v-820aad51></i></div>',1)),t("div",at,[t("p",ot,[a[1]||(a[1]=t("i",{class:"bi bi-image"},null,-1)),a[2]||(a[2]=w(" Images: ")),t("span",st,y(e.total_image),1)]),t("p",nt,[a[3]||(a[3]=t("i",{class:"bi bi-person-bounding-box"},null,-1)),a[4]||(a[4]=w(" Follower: ")),t("span",lt,y(e.total_follower),1)])])]),t("div",it,[L(` <div class="card-title fs-5 text-danger fw-bold">
                    <img src="../../../public/images/photo01.png" class="icon"/>
                     List image
                </div> `),t("div",rt,[e.userData._id===e.user_id?(b(),v("div",dt,[a[8]||(a[8]=t("p",{class:"fs-5 fw-bold"},[t("i",{class:"bi bi-stars text-danger"}),w(" Do you have any new images?")],-1)),L(` <button class="btn btn-danger text-white d-block mx-auto mt-3">
                            <input type="file" @change="handleUpload" class="file-input" hidden/>
                            <i class="bi bi-cloud-upload-fill"></i>
                            Upload photo
                        </button> `),t("label",ct,[a[6]||(a[6]=t("i",{class:"bi bi-cloud-upload-fill"},null,-1)),a[7]||(a[7]=w(" Upload Photo ")),t("input",{type:"file",onChange:e.handleUpload,class:"file-input",hidden:"",multiple:""},null,32)])])):L("v-if",!0),e.loading?(b(),v("div",mt,a[9]||(a[9]=[F('<img src="https://cdn.dribbble.com/userupload/22142955/file/original-0c62063ff813ff78dc7dcdfc0d23256e.gif" class="card-img-top image w-100" alt="" data-v-820aad51><div class="card-body" data-v-820aad51><h5 class="card-title placeholder-glow" data-v-820aad51><span class="placeholder col-6" data-v-820aad51></span></h5><p class="card-text placeholder-glow" data-v-820aad51><span class="placeholder col-7" data-v-820aad51></span><span class="placeholder col-4" data-v-820aad51></span><span class="placeholder col-4" data-v-820aad51></span><span class="placeholder col-6" data-v-820aad51></span><span class="placeholder col-8" data-v-820aad51></span></p><a class="btn btn-primary disabled placeholder col-6 mt-2" aria-disabled="true" data-v-820aad51></a></div>',2)]))):L("v-if",!0),(b(!0),v(E,null,T(e.photos,s=>{var d;return b(),v("div",{class:"list_image_item p-2",key:s._id},[I(e.RouterLink,{to:{path:"/photo",query:{id:s._id}}},{default:Y(()=>[t("img",{src:`${e.baseUrl}/images/${s.img}`,class:"image w-100"},null,8,ut)]),_:2},1032,["to"]),t("div",ht,[t("p",pt,y(s.name),1),t("p",bt,y(s.description),1),t("span",gt,y(e.formatTime(s==null?void 0:s.created_at)),1),a[12]||(a[12]=t("hr",null,null,-1)),t("div",_t,[t("p",{class:"d-flex align-items-center gap-2",onClick:m=>e.handleLove(s._id)},[e.isPhotoLoved(s)?(b(),v("i",yt)):(b(),v("i",vt)),a[10]||(a[10]=w(" Love ")),t("span",xt,y((d=s.love)==null?void 0:d.length),1)],8,ft),t("p",{class:"d-flex align-items-center gap-2","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:m=>e.changeCurrentPhoto(s)},[...a[11]||(a[11]=[t("i",{class:"bi bi-chat-left-text"},null,-1),w("Comment")])],8,Ct)])]),e.userData._id===e.user_id?(b(),v("div",kt,[t("button",{class:ee(["badge rounded-pill",{"text-bg-success":s.share_status==="public","text-bg-secondary":s.share_status==="private"}]),"data-bs-target":"#changeShareStatus","data-bs-toggle":"modal",onClick:m=>e.changeCurrentPhoto(s)},y(s.share_status),11,Pt),t("button",{onClick:m=>e.changeCurrentPhoto(s),class:"badge rounded-pill text-bg-warning","data-bs-target":"#editPhotoModal","data-bs-toggle":"modal"},[...a[13]||(a[13]=[t("i",{class:"bi bi-pencil-fill"},null,-1),w(" Edit ")])],8,wt),t("button",{onClick:m=>e.changeCurrentPhoto(s),class:"badge rounded-pill text-bg-danger","data-bs-target":"#deleteModal","data-bs-toggle":"modal"},[...a[14]||(a[14]=[t("i",{class:"bi bi-trash-fill"},null,-1),w(" Delete ")])],8,St)])):L("v-if",!0)])}),128))])])]),I(e.DeleteModal,{photoId:e.currentPhotoId,fetchPhotos:e.fetchPhotos},null,8,["photoId"]),I(e.EditPhoto,{photoId:e.currentPhotoId,currentPhoto:e.currentPhoto,fetchPhotos:e.fetchPhotos},null,8,["photoId","currentPhoto"]),I(e.ChangeShareStatus,{photoId:e.currentPhotoId,shareStatus:(h=e.currentPhoto)==null?void 0:h.share_status,fetchPhotos:e.fetchPhotos},null,8,["photoId","shareStatus"]),I(e.Comment,{currentPhoto:e.currentPhoto,user:e.user},null,8,["currentPhoto","user"])])}const Bt=A(Qe,[["render",Dt],["__scopeId","data-v-820aad51"],["__file","/Users/doanduychinh/Documents/photosharingapp_frontend/src/pages/library/index.vue"]]);export{Bt as default};
